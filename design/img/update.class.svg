<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="669px" preserveAspectRatio="none" style="width:721px;height:669px;background:#FFFFFF;" version="1.1" viewBox="0 0 721 669" width="721px" zoomAndPan="magnify"><defs><filter height="300%" id="f18cornsgz6i9n" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[975d7fda8cf98ff1a26ca528bf10cecf]
cluster App--><polygon fill="#FFFFFF" filter="url(#f18cornsgz6i9n)" points="16,6,50,6,57,28.4883,597,28.4883,597,277,16,277,16,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="57" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="20" y="21.5352">App</text><!--MD5=[01f992b2fa8adb612cc7da5577f74dfd]
cluster Protocol--><polygon fill="#FFFFFF" filter="url(#f18cornsgz6i9n)" points="123,326,189,326,196,348.4883,704,348.4883,704,662,123,662,123,326" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="123" x2="196" y1="348.4883" y2="348.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="127" y="341.5352">Protocol</text><!--MD5=[244b99f808e70c511859df938ee1dac9]
class MeldUpdate--><rect codeLine="5" fill="#FEFECE" filter="url(#f18cornsgz6i9n)" height="117.8633" id="MeldUpdate" style="stroke:#A80036;stroke-width:1.5;" width="300" x="281" y="143"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70" x="396" y="159.6016">MeldUpdate</text><line style="stroke:#A80036;stroke-width:1.5;" x1="282" x2="580" y1="167.1328" y2="167.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="138" x="287" y="181.7676">@delete : GraphSubject [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="287" y="194.7227">@insert : GraphSubject [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="287" y="207.6777">@tick : integer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="287" y="220.6328">@principal : Reference</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="287" y="233.5879">@agree</text><line style="stroke:#A80036;stroke-width:1.5;" x1="282" x2="580" y1="239.9082" y2="239.9082"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="288" x="287" y="254.543">getOperation(rel): (EncodedOperation, Attribution) [*]</text><path d="M291.5,41 L291.5,81.6211 A0,0 0 0 0 291.5,81.6211 L427,81.6211 L431,142.93 L435,81.6211 L570.5,81.6211 A0,0 0 0 0 570.5,81.6211 L570.5,51 L560.5,41 L291.5,41 A0,0 0 0 0 291.5,41 " fill="#FBFB77" filter="url(#f18cornsgz6i9n)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M560.5,41 L560.5,51 L570.5,51 L560.5,41 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="297.5" y="58.5684">App-visible update. Algorithmically built</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="297.5" y="73.8789">from operations by local m-ld engine.</text><path d="M32,143.5 L32,184.1211 A0,0 0 0 0 32,184.1211 L225,184.1211 A0,0 0 0 0 225,184.1211 L225,167.8105 L285,216.4756 L225,159.8105 L225,153.5 L215,143.5 L32,143.5 A0,0 0 0 0 32,143.5 " fill="#FBFB77" filter="url(#f18cornsgz6i9n)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M215,143.5 L215,153.5 L225,153.5 L215,143.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="38" y="161.0684">The principal responsible</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="38" y="176.3789">for the triggering operation</text><path d="M32,194.1211 L32,250.0527 A0,0 0 0 0 32,250.0527 L246,250.0527 A0,0 0 0 0 246,250.0527 L246,226.0869 L285,250.3857 L246,218.0869 L246,204.1211 L236,194.1211 L32,194.1211 A0,0 0 0 0 32,194.1211 " fill="#FBFB77" filter="url(#f18cornsgz6i9n)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M236,194.1211 L236,204.1211 L246,204.1211 L236,194.1211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="38" y="211.6895">Accesses protocol information</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="38" y="227">given a relationship type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="38" y="242.3105">(see links to Protocol)</text><!--MD5=[e597c17acbae36479f49c4cca0e8a176]
class EncodedOperation--><rect codeLine="29" fill="#FEFECE" filter="url(#f18cornsgz6i9n)" height="91.9531" id="EncodedOperation" style="stroke:#A80036;stroke-width:1.5;" width="113" x="374.5" y="361"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="377.5" y="377.6016">EncodedOperation</text><line style="stroke:#A80036;stroke-width:1.5;" x1="375.5" x2="486.5" y1="385.1328" y2="385.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="380.5" y="399.7676">from : integer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="380.5" y="412.7227">time : Clock</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="380.5" y="425.6777">pid: IRI</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="9" x="380.5" y="438.6328">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="375.5" x2="486.5" y1="444.9531" y2="444.9531"/><path d="M139,374 L139,429.9316 A0,0 0 0 0 139,429.9316 L339,429.9316 A0,0 0 0 0 339,429.9316 L339,405.9658 L378.5,408.5654 L339,397.9658 L339,384 L329,374 L139,374 A0,0 0 0 0 139,374 " fill="#FBFB77" filter="url(#f18cornsgz6i9n)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M329,374 L329,384 L339,384 L329,374 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="145" y="391.5684">operation time refers to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="145" y="406.8789">the originating clone. Unlike</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="145" y="422.1895">@tick which is always local.</text><!--MD5=[7047f3041f36be45285233f4844281c3]
class Attribution--><rect codeLine="42" fill="#FEFECE" filter="url(#f18cornsgz6i9n)" height="66.043" id="Attribution" style="stroke:#A80036;stroke-width:1.5;" width="71" x="395.5" y="547"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="401" y="563.6016">Attribution</text><line style="stroke:#A80036;stroke-width:1.5;" x1="396.5" x2="465.5" y1="571.1328" y2="571.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="401.5" y="585.7676">pid: IRI</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="401.5" y="598.7227">sig?: Buffer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="396.5" x2="465.5" y1="605.043" y2="605.043"/><path d="M184,514 L184,569.9316 A0,0 0 0 0 184,569.9316 L340,569.9316 A0,0 0 0 0 340,569.9316 L340,545.9658 L399.5,581.6104 L340,537.9658 L340,524 L330,514 L184,514 A0,0 0 0 0 184,514 " fill="#FBFB77" filter="url(#f18cornsgz6i9n)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M330,514 L330,524 L340,524 L330,514 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="190" y="531.5684">Not necessarily equal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="190" y="546.8789">to the operation</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="24" x="295" y="546.5552">pid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="190" y="562.1895">e.g. if a fusion</text><path d="M184,579.9316 L184,635.8633 A0,0 0 0 0 184,635.8633 L360,635.8633 A0,0 0 0 0 360,635.8633 L360,611.8975 L399.5,594.5654 L360,603.8975 L360,589.9316 L350,579.9316 L184,579.9316 A0,0 0 0 0 184,579.9316 " fill="#FBFB77" filter="url(#f18cornsgz6i9n)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M350,579.9316 L350,589.9316 L360,589.9316 L350,579.9316 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="190" y="597.5">signature format is app-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="190" y="612.8105">or extension-specific,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="190" y="628.1211">and verifiable as such</text><!--MD5=[21f98b2d203d0dcf772bbd87dcd830dd]
link MeldUpdate$$$LEFT to MeldUpdate--><!--MD5=[c8c4d1410d3ee90b8693a56fd5941ca6]
link EncodedOperation$$$LEFT to EncodedOperation--><!--MD5=[5450c5bc5562565a21b6969f1a8fb4d6]
link EncodedOperation to Attribution--><path codeLine="40" d="M431,453.38 C431,482.86 431,520.58 431,546.96 " fill="none" id="EncodedOperation-Attribution" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[09de0582901cba398bc6a08f377a4757]
link Attribution$$$LEFT to Attribution--><!--MD5=[c7ba057f25b7cbb49d30dfaf9d180994]
reverse link EncodedOperation to EncodedOperation--><path codeLine="57" d="M500.91,393.55 C513.6,395.26 522.5,399.74 522.5,407 C522.5,416.57 507.01,421.32 487.74,421.25 " fill="none" id="EncodedOperation-backto-EncodedOperation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="487.74,392.75,493.4875,397.1051,499.7181,393.4747,493.9706,389.1197,487.74,392.75" style="stroke:#A80036;stroke-width:1.0;"/><path d="M527.5,377.5 L527.5,432.5 L695.5,432.5 L695.5,387.5 L685.5,377.5 L527.5,377.5 " fill="#FBFB77" filter="url(#f18cornsgz6i9n)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M685.5,377.5 L685.5,387.5 L695.5,387.5 L685.5,377.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="533.5" y="395.0684">if</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="546.5" y="394.7446">from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="582.5" y="395.0684">&lt;</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="596.5" y="394.7446">time.ticks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="676.5" y="395.0684">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="533.5" y="410.3789">fused operations from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="533.5" y="425.6895">a single clone &amp; user.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="495.3942" y="419.7061">*</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="65" d="M289.25,270.72 C280.09,282.91 278.77,296.17 291,310 C300.64,320.9 343.18,311.1 356,318 C374.56,327.99 390.51,344.59 402.87,360.69 " fill="none" id="MeldUpdate-backto-EncodedOperation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="298.17,261.19,291.1514,262.8452,289.9798,269.9605,296.9984,268.3053,298.17,261.19" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="292" y="306.5684">trigger</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="390.1509" y="350.3813">1</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="67" d="M382.54,272.95 C379.52,279.52 376.93,286.25 375,293 C368.32,316.37 377.96,340.72 391.03,360.8 " fill="none" id="MeldUpdate-backto-EncodedOperation-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="388.39,261.32,382.1202,264.8823,382.9971,272.0399,389.2668,268.4776,388.39,261.32" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="376" y="306.5684">applicable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="376.2971" y="350.1729">1</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="69" d="M443.18,274.81 C443.92,280.95 444.54,287.08 445,293 C446.73,315.37 444.17,340.12 440.79,360.73 " fill="none" id="MeldUpdate-backto-EncodedOperation-2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="441.43,261.43,438.2491,267.9016,442.9995,273.3269,446.1804,266.8553,441.43,261.43" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="446" y="306.5684">resolution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="416.4516" y="350.0922">0..1</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="71" d="M516.53,272.6 C522.3,284.34 524.07,296.97 519,310 C511.71,328.75 498.85,346.07 485.17,360.68 " fill="none" id="MeldUpdate-backto-EncodedOperation-3" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="509.54,261.18,509.2608,268.3857,515.8049,271.4148,516.084,264.2091,509.54,261.18" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="522" y="306.5684">voids</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="486.6856" y="350.3698">*</text><!--MD5=[3443eb759280c1d62461ec012fb305af]
@startuml
'https://plantuml.com/class-diagram
hide circle

package App {
  class MeldUpdate {
    @delete : GraphSubject [*]
    @insert : GraphSubject [*]
    @tick : integer
    @principal : Reference
    @agree
    getOperation(rel): (EncodedOperation, Attribution) [*]
  }
  note top of MeldUpdate
    App-visible update. Algorithmically built
    from operations by local m-ld engine.
  end note
  note left of MeldUpdate::principal
    The principal responsible
    for the triggering operation
  end note
  note left of MeldUpdate::getOperation
    Accesses protocol information
    given a relationship type
    (see links to Protocol)
  end note
}

package Protocol {
  class EncodedOperation {
    from : integer
    time : Clock
    pid: IRI
    ...
  }
  note left of EncodedOperation::time
    operation time refers to
    the originating clone. Unlike
    @tick which is always local.
  end note
  EncodedOperation - - Attribution

  class Attribution {
    pid: IRI
    sig?: Buffer
  }
  note left of Attribution::pid
    Not necessarily equal
    to the operation ""pid""
    e.g. if a fusion
  end note
  note left of Attribution::sig
    signature format is app-
    or extension-specific,
    and verifiable as such
  end note

  EncodedOperation o- - "*" EncodedOperation
  note on link
    if ""from"" < ""time.ticks"",
    fused operations from
    a single clone & user.
  end note
}

MeldUpdate o- - "1" EncodedOperation : trigger

MeldUpdate o- - "1" EncodedOperation : applicable

MeldUpdate o- - "0..1" EncodedOperation : resolution

MeldUpdate o- - "*" EncodedOperation : voids

@enduml

@startuml
hide circle

package App {
  class MeldUpdate {
    @delete : GraphSubject [*]
    @insert : GraphSubject [*]
    @tick : integer
    @principal : Reference
    @agree
    getOperation(rel): (EncodedOperation, Attribution) [*]
  }
  note top of MeldUpdate
    App-visible update. Algorithmically built
    from operations by local m-ld engine.
  end note
  note left of MeldUpdate::principal
    The principal responsible
    for the triggering operation
  end note
  note left of MeldUpdate::getOperation
    Accesses protocol information
    given a relationship type
    (see links to Protocol)
  end note
}

package Protocol {
  class EncodedOperation {
    from : integer
    time : Clock
    pid: IRI
    ...
  }
  note left of EncodedOperation::time
    operation time refers to
    the originating clone. Unlike
    @tick which is always local.
  end note
  EncodedOperation - - Attribution

  class Attribution {
    pid: IRI
    sig?: Buffer
  }
  note left of Attribution::pid
    Not necessarily equal
    to the operation ""pid""
    e.g. if a fusion
  end note
  note left of Attribution::sig
    signature format is app-
    or extension-specific,
    and verifiable as such
  end note

  EncodedOperation o- - "*" EncodedOperation
  note on link
    if ""from"" < ""time.ticks"",
    fused operations from
    a single clone & user.
  end note
}

MeldUpdate o- - "1" EncodedOperation : trigger

MeldUpdate o- - "1" EncodedOperation : applicable

MeldUpdate o- - "0..1" EncodedOperation : resolution

MeldUpdate o- - "*" EncodedOperation : voids

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>