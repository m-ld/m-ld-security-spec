<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="669px" preserveAspectRatio="none" style="width:699px;height:669px;background:#FFFFFF;" version="1.1" viewBox="0 0 699 669" width="699px" zoomAndPan="magnify"><defs><filter height="300%" id="f1y0zjr9xb16hu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[975d7fda8cf98ff1a26ca528bf10cecf]
cluster App--><polygon fill="#FFFFFF" filter="url(#f1y0zjr9xb16hu)" points="16,6,50,6,57,28.4883,553,28.4883,553,277,16,277,16,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="57" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="20" y="21.5352">App</text><!--MD5=[01f992b2fa8adb612cc7da5577f74dfd]
cluster Protocol--><polygon fill="#FFFFFF" filter="url(#f1y0zjr9xb16hu)" points="101,326,167,326,174,348.4883,682,348.4883,682,662,101,662,101,326" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="101" x2="174" y1="348.4883" y2="348.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="105" y="341.5352">Protocol</text><!--MD5=[244b99f808e70c511859df938ee1dac9]
class MeldUpdate--><rect codeLine="5" fill="#FEFECE" filter="url(#f1y0zjr9xb16hu)" height="117.8633" id="MeldUpdate" style="stroke:#A80036;stroke-width:1.5;" width="256" x="281" y="143"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70" x="374" y="159.6016">MeldUpdate</text><line style="stroke:#A80036;stroke-width:1.5;" x1="282" x2="536" y1="167.1328" y2="167.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="138" x="287" y="181.7676">@delete : GraphSubject [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="137" x="287" y="194.7227">@insert : GraphSubject [*]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="287" y="207.6777">@tick : integer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="287" y="220.6328">@principal : Reference</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="287" y="233.5879">@agree</text><line style="stroke:#A80036;stroke-width:1.5;" x1="282" x2="536" y1="239.9082" y2="239.9082"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="244" x="287" y="254.543">trace(rel): (EncodedOperation, Attribution) [*]</text><path d="M257.5,41 L257.5,81.6211 A0,0 0 0 0 257.5,81.6211 L394.69,81.6211 L403.97,142.93 L402.69,81.6211 L536.5,81.6211 A0,0 0 0 0 536.5,81.6211 L536.5,51 L526.5,41 L257.5,41 A0,0 0 0 0 257.5,41 " fill="#FBFB77" filter="url(#f1y0zjr9xb16hu)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M526.5,41 L526.5,51 L536.5,51 L526.5,41 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="263.5" y="58.5684">App-visible update. Algorithmically built</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="263.5" y="73.8789">from operations by local m-ld engine.</text><path d="M32,143.5 L32,184.1211 A0,0 0 0 0 32,184.1211 L225,184.1211 A0,0 0 0 0 225,184.1211 L225,167.8105 L285,216.4756 L225,159.8105 L225,153.5 L215,143.5 L32,143.5 A0,0 0 0 0 32,143.5 " fill="#FBFB77" filter="url(#f1y0zjr9xb16hu)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M215,143.5 L215,153.5 L225,153.5 L215,143.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="38" y="161.0684">The principal responsible</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="38" y="176.3789">for the triggering operation</text><!--MD5=[e597c17acbae36479f49c4cca0e8a176]
class EncodedOperation--><rect codeLine="31" fill="#FEFECE" filter="url(#f1y0zjr9xb16hu)" height="91.9531" id="EncodedOperation" style="stroke:#A80036;stroke-width:1.5;" width="113" x="352.5" y="361"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="355.5" y="377.6016">EncodedOperation</text><line style="stroke:#A80036;stroke-width:1.5;" x1="353.5" x2="464.5" y1="385.1328" y2="385.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="358.5" y="399.7676">from : integer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="358.5" y="412.7227">time : Clock</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="358.5" y="425.6777">pid: IRI</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="9" x="358.5" y="438.6328">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="353.5" x2="464.5" y1="444.9531" y2="444.9531"/><path d="M117,374 L117,429.9316 A0,0 0 0 0 117,429.9316 L317,429.9316 A0,0 0 0 0 317,429.9316 L317,405.9658 L356.5,408.5654 L317,397.9658 L317,384 L307,374 L117,374 A0,0 0 0 0 117,374 " fill="#FBFB77" filter="url(#f1y0zjr9xb16hu)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M307,374 L307,384 L317,384 L307,374 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="123" y="391.5684">operation time refers to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="123" y="406.8789">the originating clone. Unlike</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="123" y="422.1895">@tick which is always local.</text><!--MD5=[7047f3041f36be45285233f4844281c3]
class Attribution--><rect codeLine="44" fill="#FEFECE" filter="url(#f1y0zjr9xb16hu)" height="66.043" id="Attribution" style="stroke:#A80036;stroke-width:1.5;" width="71" x="373.5" y="547"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="379" y="563.6016">Attribution</text><line style="stroke:#A80036;stroke-width:1.5;" x1="374.5" x2="443.5" y1="571.1328" y2="571.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="379.5" y="585.7676">pid: IRI</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="379.5" y="598.7227">sig?: Buffer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="374.5" x2="443.5" y1="605.043" y2="605.043"/><path d="M162,514 L162,569.9316 A0,0 0 0 0 162,569.9316 L318,569.9316 A0,0 0 0 0 318,569.9316 L318,545.9658 L377.5,581.6104 L318,537.9658 L318,524 L308,514 L162,514 A0,0 0 0 0 162,514 " fill="#FBFB77" filter="url(#f1y0zjr9xb16hu)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M308,514 L308,524 L318,524 L308,514 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="168" y="531.5684">Not necessarily equal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="168" y="546.8789">to the operation</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="24" x="273" y="546.5552">pid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="168" y="562.1895">e.g. if a fusion</text><path d="M162,579.9316 L162,635.8633 A0,0 0 0 0 162,635.8633 L338,635.8633 A0,0 0 0 0 338,635.8633 L338,611.8975 L377.5,594.5654 L338,603.8975 L338,589.9316 L328,579.9316 L162,579.9316 A0,0 0 0 0 162,579.9316 " fill="#FBFB77" filter="url(#f1y0zjr9xb16hu)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M328,579.9316 L328,589.9316 L338,589.9316 L328,579.9316 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="168" y="597.5">signature format is app-</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="168" y="612.8105">or extension-specific,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="168" y="628.1211">and verifiable as such</text><!--MD5=[21f98b2d203d0dcf772bbd87dcd830dd]
link MeldUpdate$$$LEFT to MeldUpdate--><!--MD5=[c8c4d1410d3ee90b8693a56fd5941ca6]
link EncodedOperation$$$LEFT to EncodedOperation--><!--MD5=[5450c5bc5562565a21b6969f1a8fb4d6]
link EncodedOperation to Attribution--><path codeLine="42" d="M409,453.38 C409,482.86 409,520.58 409,546.96 " fill="none" id="EncodedOperation-Attribution" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[09de0582901cba398bc6a08f377a4757]
link Attribution$$$LEFT to Attribution--><!--MD5=[c7ba057f25b7cbb49d30dfaf9d180994]
reverse link EncodedOperation to EncodedOperation--><path codeLine="60" d="M478.91,393.55 C491.6,395.26 500.5,399.74 500.5,407 C500.5,416.57 485.01,421.32 465.74,421.25 " fill="none" id="EncodedOperation-backto-EncodedOperation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="465.74,392.75,471.4875,397.1051,477.7181,393.4747,471.9706,389.1197,465.74,392.75" style="stroke:#A80036;stroke-width:1.0;"/><path d="M505.5,377.5 L505.5,432.5 L673.5,432.5 L673.5,387.5 L663.5,377.5 L505.5,377.5 " fill="#FBFB77" filter="url(#f1y0zjr9xb16hu)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M663.5,377.5 L663.5,387.5 L673.5,387.5 L663.5,377.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="511.5" y="395.0684">if</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="524.5" y="394.7446">from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="10" x="560.5" y="395.0684">&lt;</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="574.5" y="394.7446">time.ticks</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="654.5" y="395.0684">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="511.5" y="410.3789">fused operations from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="511.5" y="425.6895">a single clone &amp; user.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="473.3942" y="419.7061">*</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="68" d="M284.95,270.77 C278.8,277.59 273.37,284.99 269,293 C265.38,299.63 263.99,304.34 269,310 C278.64,320.9 321.18,311.1 334,318 C352.56,327.99 368.51,344.59 380.87,360.69 " fill="none" id="MeldUpdate-backto-EncodedOperation" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="294.44,261.18,287.3756,262.6272,285.9944,269.7048,293.0588,268.2576,294.44,261.18" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="270" y="306.5684">trigger</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="368.1509" y="350.3813">1</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="70" d="M360.54,272.95 C357.52,279.52 354.93,286.25 353,293 C346.32,316.37 355.96,340.72 369.03,360.8 " fill="none" id="MeldUpdate-backto-EncodedOperation-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="366.39,261.32,360.1202,264.8823,360.9971,272.0399,367.2668,268.4776,366.39,261.32" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="354" y="306.5684">applicable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="354.2971" y="350.1729">1</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="72" d="M421.18,274.81 C421.92,280.95 422.54,287.08 423,293 C424.73,315.37 422.17,340.12 418.79,360.73 " fill="none" id="MeldUpdate-backto-EncodedOperation-2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="419.43,261.43,416.2491,267.9016,420.9995,273.3269,424.1804,266.8553,419.43,261.43" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="424" y="306.5684">resolution</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="394.4516" y="350.0922">0..1</text><!--MD5=[27323eaaf4a51c0a910ee92fc703a146]
reverse link MeldUpdate to EncodedOperation--><path codeLine="74" d="M494.53,272.6 C500.3,284.34 502.07,296.97 497,310 C489.71,328.75 476.85,346.07 463.17,360.68 " fill="none" id="MeldUpdate-backto-EncodedOperation-3" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="487.54,261.18,487.2608,268.3857,493.8049,271.4148,494.084,264.2091,487.54,261.18" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="500" y="306.5684">voids</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="464.6856" y="350.3698">*</text><!--MD5=[81669376412f941b680af4cfd5bc34ca]
@startuml
'https://plantuml.com/class-diagram
hide circle

package App {
  class MeldUpdate {
    @delete : GraphSubject [*]
    @insert : GraphSubject [*]
    @tick : integer
    @principal : Reference
    @agree
    trace(rel): (EncodedOperation, Attribution) [*]
  }
  note top of MeldUpdate
    App-visible update. Algorithmically built
    from operations by local m-ld engine.
  end note

  note left of MeldUpdate::principal
    The principal responsible
    for the triggering operation
  end note

  note left of MeldUpdate::getOperation
    Accesses protocol information
    given a relationship type
    (see links to Protocol)
  end note
}

package Protocol {
  class EncodedOperation {
    from : integer
    time : Clock
    pid: IRI
    ...
  }
  note left of EncodedOperation::time
    operation time refers to
    the originating clone. Unlike
    @tick which is always local.
  end note
  EncodedOperation - - Attribution

  class Attribution {
    pid: IRI
    sig?: Buffer
  }
  note left of Attribution::pid
    Not necessarily equal
    to the operation ""pid""
    e.g. if a fusion
  end note

  note left of Attribution::sig
    signature format is app-
    or extension-specific,
    and verifiable as such
  end note

  EncodedOperation o- - "*" EncodedOperation
  note on link
    if ""from"" < ""time.ticks"",
    fused operations from
    a single clone & user.
  end note
}

MeldUpdate o- - "1" EncodedOperation : trigger

MeldUpdate o- - "1" EncodedOperation : applicable

MeldUpdate o- - "0..1" EncodedOperation : resolution

MeldUpdate o- - "*" EncodedOperation : voids

@enduml

@startuml
hide circle

package App {
  class MeldUpdate {
    @delete : GraphSubject [*]
    @insert : GraphSubject [*]
    @tick : integer
    @principal : Reference
    @agree
    trace(rel): (EncodedOperation, Attribution) [*]
  }
  note top of MeldUpdate
    App-visible update. Algorithmically built
    from operations by local m-ld engine.
  end note

  note left of MeldUpdate::principal
    The principal responsible
    for the triggering operation
  end note

  note left of MeldUpdate::getOperation
    Accesses protocol information
    given a relationship type
    (see links to Protocol)
  end note
}

package Protocol {
  class EncodedOperation {
    from : integer
    time : Clock
    pid: IRI
    ...
  }
  note left of EncodedOperation::time
    operation time refers to
    the originating clone. Unlike
    @tick which is always local.
  end note
  EncodedOperation - - Attribution

  class Attribution {
    pid: IRI
    sig?: Buffer
  }
  note left of Attribution::pid
    Not necessarily equal
    to the operation ""pid""
    e.g. if a fusion
  end note

  note left of Attribution::sig
    signature format is app-
    or extension-specific,
    and verifiable as such
  end note

  EncodedOperation o- - "*" EncodedOperation
  note on link
    if ""from"" < ""time.ticks"",
    fused operations from
    a single clone & user.
  end note
}

MeldUpdate o- - "1" EncodedOperation : trigger

MeldUpdate o- - "1" EncodedOperation : applicable

MeldUpdate o- - "0..1" EncodedOperation : resolution

MeldUpdate o- - "*" EncodedOperation : voids

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>