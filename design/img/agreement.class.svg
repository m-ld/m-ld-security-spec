<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="760px" preserveAspectRatio="none" style="width:503px;height:760px;background:#FFFFFF;" version="1.1" viewBox="0 0 503 760" width="503px" zoomAndPan="magnify"><defs><filter height="300%" id="f1h1fh3qw3o4qj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[3033666b299940720da52d7acf40ab9f]
cluster mld--><polygon fill="#FFFFFF" filter="url(#f1h1fh3qw3o4qj)" points="16,6,50,6,57,28.4883,486,28.4883,486,753,16,753,16,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="57" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="20" y="21.5352">mld</text><!--MD5=[e858af084306b6893e511512445fa96f]
class AgreementCondition--><rect codeLine="10" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="68.3984" id="AgreementCondition" style="stroke:#A80036;stroke-width:1.5;" width="123" x="32.5" y="202.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62" x="63" y="219.1016">«statutory»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="100" x="44" y="233.2344">«extension point»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="35.5" y="247.3672">AgreementCondition</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="154.5" y1="254.8984" y2="254.8984"/><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="154.5" y1="262.8984" y2="262.8984"/><!--MD5=[bfe80886124190284096452d0cb4568d]
class Principal--><rect codeLine="12" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="53.0879" id="Principal" style="stroke:#A80036;stroke-width:1.5;" width="105" x="268.5" y="676.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="296.5" y="693.1016">Principal</text><line style="stroke:#A80036;stroke-width:1.5;" x1="269.5" x2="372.5" y1="700.6328" y2="700.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="274.5" y="715.2676">publicKey : String</text><line style="stroke:#A80036;stroke-width:1.5;" x1="269.5" x2="372.5" y1="721.5879" y2="721.5879"/><!--MD5=[2fa5fbc8e001eea309e0c2d7ce9724cc]
class Authority--><rect codeLine="16" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="40.1328" id="Authority" style="stroke:#A80036;stroke-width:1.5;" width="57" x="394.5" y="216.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="397.5" y="233.1016">Authority</text><line style="stroke:#A80036;stroke-width:1.5;" x1="395.5" x2="450.5" y1="240.6328" y2="240.6328"/><line style="stroke:#A80036;stroke-width:1.5;" x1="395.5" x2="450.5" y1="248.6328" y2="248.6328"/><path d="M190.5,197 L190.5,276.2422 A0,0 0 0 0 190.5,276.2422 L359.5,276.2422 A0,0 0 0 0 359.5,276.2422 L359.5,240.5 L394.32,236.5 L359.5,232.5 L359.5,207 L349.5,197 L190.5,197 A0,0 0 0 0 190.5,197 " fill="#FBFB77" filter="url(#f1h1fh3qw3o4qj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M349.5,197 L349.5,207 L359.5,207 L349.5,197 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="196.5" y="214.5684">Authority is permission</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="196.5" y="229.8789">to unilaterally agree.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="358.5" y1="232.6211" y2="232.6211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="196.5" y="249.1895">A "lock" is just</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="196.5" y="264.5">temporary authority.</text><rect fill="#FFC0CB" filter="url(#f1h1fh3qw3o4qj)" height="34.1328" style="stroke:#A80036;stroke-width:1.5;" width="85" x="333.5" y="63.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="340.5" y="77.1016">hasAuthority</text><line style="stroke:#A80036;stroke-width:1.5;" x1="334.5" x2="417.5" y1="81.6328" y2="81.6328"/><!--MD5=[03da7ad6344b0b2c818a169ad3cc63fd]
class Permission--><rect codeLine="29" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="40.1328" id="Permission" style="stroke:#A80036;stroke-width:1.5;" width="68" x="266" y="467"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62" x="269" y="483.6016">Permission</text><line style="stroke:#A80036;stroke-width:1.5;" x1="267" x2="333" y1="491.1328" y2="491.1328"/><line style="stroke:#A80036;stroke-width:1.5;" x1="267" x2="333" y1="499.1328" y2="499.1328"/><!--MD5=[ee60552bc4698d86a6bc3ed4a603a080]
class AccessControl--><rect codeLine="59" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="68.3984" id="AccessControl" style="stroke:#A80036;stroke-width:1.5;" width="102" x="106" y="669"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62" x="126" y="685.6016">«statutory»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="100" x="107" y="699.7344">«extension point»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="80" x="117" y="713.8672">AccessControl</text><line style="stroke:#A80036;stroke-width:1.5;" x1="107" x2="207" y1="721.3984" y2="721.3984"/><line style="stroke:#A80036;stroke-width:1.5;" x1="107" x2="207" y1="729.3984" y2="729.3984"/><!--MD5=[351b359b29cff09e6a4a566bc97215f7]
class WritePermission--><rect codeLine="32" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="53.0879" id="WritePermission" style="stroke:#A80036;stroke-width:1.5;" width="155" x="32.5" y="337"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="64.5" y="353.6016">WritePermission</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="186.5" y1="361.1328" y2="361.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="143" x="38.5" y="375.7676">appliesToPattern : json-rql</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="186.5" y1="382.0879" y2="382.0879"/><rect fill="#FFC0CB" filter="url(#f1h1fh3qw3o4qj)" height="34.1328" style="stroke:#A80036;stroke-width:1.5;" width="103" x="366.5" y="346.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="373.5" y="360.1016">readPermission</text><line style="stroke:#A80036;stroke-width:1.5;" x1="367.5" x2="468.5" y1="364.6328" y2="364.6328"/><path d="M222.5,343 L222.5,383.6211 A0,0 0 0 0 222.5,383.6211 L331.5,383.6211 A0,0 0 0 0 331.5,383.6211 L331.5,367.5 L366.32,363.5 L331.5,359.5 L331.5,353 L321.5,343 L222.5,343 A0,0 0 0 0 222.5,343 " fill="#FBFB77" filter="url(#f1h1fh3qw3o4qj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M321.5,343 L321.5,353 L331.5,353 L321.5,343 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="228.5" y="360.5684">gives access</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="228.5" y="375.8789">to the domain</text><!--MD5=[b1b74276e73eebfca416c610f92c7db6]
class RaftConsensus--><rect codeLine="45" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="78.998" id="RaftConsensus" style="stroke:#A80036;stroke-width:1.5;" width="131" x="134.5" y="41"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="158" y="57.6016">RaftConsensus</text><line style="stroke:#A80036;stroke-width:1.5;" x1="135.5" x2="264.5" y1="65.1328" y2="65.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="140.5" y="79.7676">mtbf : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119" x="140.5" y="92.7227">electionTimeout : float</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="113" x="140.5" y="105.6777">broadcastTime : float</text><line style="stroke:#A80036;stroke-width:1.5;" x1="135.5" x2="264.5" y1="111.998" y2="111.998"/><!--MD5=[b0a73b92b181cdd4e48969b2967af167]
class External--><rect codeLine="52" fill="#FEFECE" filter="url(#f1h1fh3qw3o4qj)" height="40.1328" id="External" style="stroke:#A80036;stroke-width:1.5;" width="53" x="46.5" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="47" x="49.5" y="77.1016">External</text><line style="stroke:#A80036;stroke-width:1.5;" x1="47.5" x2="98.5" y1="84.6328" y2="84.6328"/><line style="stroke:#A80036;stroke-width:1.5;" x1="47.5" x2="98.5" y1="92.6328" y2="92.6328"/><rect fill="#FFC0CB" filter="url(#f1h1fh3qw3o4qj)" height="37.9102" style="stroke:#A80036;stroke-width:1.5;" width="87" x="87.5" y="468"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="105.5" y="481.6016">[domain]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="88.5" x2="173.5" y1="486.1328" y2="486.1328"/><text fill="#000000" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="75" x="93.5" y="499.8008">secret = "abcd"</text><!--MD5=[c4dafc91941daf8ea94ba467a946a13d]
link hasAuthority to AgreementCondition--><path codeLine="25" d="M346.62,97.54 C302.55,121.61 218.23,167.66 159.17,199.91 " fill="none" id="hasAuthority-to-AgreementCondition" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="154.61,202.4,164.4254,201.5885,158.9962,199.9997,160.5849,194.5706,154.61,202.4" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="244" y="163.5684">rdf:type</text><!--MD5=[1ac6cc4daac6ff61c6b2f08354f8377d]
link hasAuthority to Authority--><path codeLine="26" d="M380.94,97.69 C389.22,124.81 405.93,179.57 415.61,211.29 " fill="none" id="hasAuthority-to-Authority" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="417.1,216.17,418.3051,206.3951,415.6436,211.3868,410.652,208.7253,417.1,216.17" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="401" y="163.5684">«require»</text><!--MD5=[4af3da69a748770557492dfddba56560]
link Permission to Principal--><path codeLine="27" d="M303.19,520.55 C306.95,558.82 317.3068,664.3475 317.3068,664.3475 " fill="none" id="Permission-Principal" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="318.48,676.29,321.8743,669.9277,317.3068,664.3475,313.9126,670.7098,318.48,676.29" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="301.9,507.37,298.799,516.7179,302.3888,512.346,306.7607,515.9358,301.9,507.37" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="302.3888" x2="303.17" y1="512.346" y2="520.305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="315" y="593.0684">hasPermission</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="6" x="295.5906" y="527.8018">*</text><!--MD5=[cb7c95fcd55ad0de7117334bc44c0516]
link Permission to AccessControl--><path codeLine="30" d="M298.92,507.15 C296.57,542.92 289.95,618.16 275,639 C262.87,655.91 244.77,668.7 226.37,678.19 " fill="none" id="Permission-to-AccessControl" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="229.17,684.61,208.07,686.6,223.32,671.89,229.17,684.61" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[245fa1357f83202a06664675712ecc9b]
link Authority to WritePermission--><path codeLine="35" d="M403.63,256.56 C395.85,263.42 386.48,270.76 377,276 C347.24,292.45 270.58,316.67 206.99,335.31 " fill="none" id="Authority-to-WritePermission" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="208.9,342.04,187.75,340.89,205,328.59,208.9,342.04" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d2a4eed77645d446c222f15609846f62]
link WritePermission to Permission--><path codeLine="36" d="M150.29,390.27 C180.39,409.51 221.61,435.87 253.17,456.05 " fill="none" id="WritePermission-to-Permission" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="256.95,450.16,270.03,466.84,249.41,461.96,256.95,450.16" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7d5504a5ba60d5c6164bc7588cf3a706]
link readPermission to Permission--><path codeLine="43" d="M402.33,380.63 C381.74,401.83 345.46,439.19 322.09,463.25 " fill="none" id="readPermission-to-Permission" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="318.45,467,327.5915,463.3348,321.9352,463.4148,321.8552,457.7585,318.45,467" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="363" y="433.5684">rdf:type</text><!--MD5=[e8aa35b51a72e5a4a047b4cd8248957d]
link RaftConsensus to AgreementCondition--><path codeLine="50" d="M173.25,120.36 C159.58,140.23 142.78,164.63 128.18,185.85 " fill="none" id="RaftConsensus-to-AgreementCondition" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="133.89,189.89,116.79,202.39,122.36,181.95,133.89,189.89" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ad4174f246f69aa3bdc0adb50174fd0f]
link External to AgreementCondition--><path codeLine="53" d="M75.62,100.69 C78.39,121.03 82.89,154.05 86.75,182.32 " fill="none" id="External-to-AgreementCondition" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="93.7,181.5,89.47,202.27,79.83,183.39,93.7,181.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f5d0b4afdc19367f7fc31d30f453502c]
link domain to AccessControl--><path codeLine="60" d="M127.9,506.4 C123.68,535.11 117.73,592.13 128,639 C129.84,647.38 132.89,655.97 136.35,664.01 " fill="none" id="domain-to-AccessControl" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="138.55,668.93,138.5185,659.0812,136.5047,664.3675,131.2185,662.3536,138.55,668.93" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="164" y="550.5684">«statutory»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="178.5" y="565.8789">access</text><path d="M133,574.6211 L133,629.6211 L262,629.6211 L262,584.6211 L252,574.6211 L133,574.6211 " fill="#FBFB77" filter="url(#f1h1fh3qw3o4qj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M252,574.6211 L252,584.6211 L262,584.6211 L252,574.6211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="139" y="592.1895">added by the app</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="139" y="607.5">to specify use of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="139" y="622.8105">e.g. Permissions</text><!--MD5=[ba259f02cdcb23a462139094fc404526]
@startuml
'https://plantuml.com/object-diagram
hide circle

skinparam object {
  BackgroundColor Pink
}

package mld {

class AgreementCondition <<statutory>> <<extension point>>

class Principal {
  publicKey : String
}

class Authority
note left
Authority is permission
to unilaterally agree.
- - -
A "lock" is just
temporary authority.
end note
object hasAuthority
hasAuthority - -> AgreementCondition : rdf:type
hasAuthority ..> Authority : <<require>>
Permission "*" <- -o Principal : hasPermission

abstract class Permission
Permission - -|> AccessControl

class WritePermission {
  appliesToPattern : json-rql
}
Authority - -|> WritePermission
WritePermission - -|> Permission

object readPermission
note left
gives access
to the domain
end note
readPermission - -> Permission : rdf:type

class RaftConsensus {
  mtbf : float
  electionTimeout : float
  broadcastTime : float
}
RaftConsensus - -|> AgreementCondition

abstract class External
External - -|> AgreementCondition

object "[domain]" as domain {
  secret = "abcd"
}

abstract class AccessControl <<statutory>> <<extension point>>
domain ..> AccessControl : <<statutory>>\naccess
note on link
added by the app
to specify use of
e.g. Permissions
end note

}
@enduml

@startuml
hide circle

skinparam object {
  BackgroundColor Pink
}

package mld {

class AgreementCondition <<statutory>> <<extension point>>

class Principal {
  publicKey : String
}

class Authority
note left
Authority is permission
to unilaterally agree.
- - -
A "lock" is just
temporary authority.
end note
object hasAuthority
hasAuthority - -> AgreementCondition : rdf:type
hasAuthority ..> Authority : <<require>>
Permission "*" <- -o Principal : hasPermission

abstract class Permission
Permission - -|> AccessControl

class WritePermission {
  appliesToPattern : json-rql
}
Authority - -|> WritePermission
WritePermission - -|> Permission

object readPermission
note left
gives access
to the domain
end note
readPermission - -> Permission : rdf:type

class RaftConsensus {
  mtbf : float
  electionTimeout : float
  broadcastTime : float
}
RaftConsensus - -|> AgreementCondition

abstract class External
External - -|> AgreementCondition

object "[domain]" as domain {
  secret = "abcd"
}

abstract class AccessControl <<statutory>> <<extension point>>
domain ..> AccessControl : <<statutory>>\naccess
note on link
added by the app
to specify use of
e.g. Permissions
end note

}
@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>