<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="659px" preserveAspectRatio="none" style="width:763px;height:659px;background:#FFFFFF;" version="1.1" viewBox="0 0 763 659" width="763px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rkd2yurigasb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="640.0781" style="stroke:#A80036;stroke-width:1.0;" width="260.5" x="346" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="427.75" y="18.5684">Claire's device</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="96" x="428.25" y="33.8789">(closer to Bob)</text><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="68.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="361" y="230.3516"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="83.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="361" y="396.9043"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576" y="201.041"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576" y="298.9727"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="271.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576" y="362.5938"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="202" x2="202" y1="103.1094" y2="652.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="298" x2="298" y1="103.1094" y2="652.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="366" x2="366" y1="103.1094" y2="652.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="580.5" x2="580.5" y1="103.1094" y2="652.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="707" x2="707" y1="103.1094" y2="652.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="157" y="100.1563">Alice's clone</text><path d="M184,50.6211 C184,40.6211 202,40.6211 202,40.6211 C202,40.6211 220,40.6211 220,50.6211 L220,76.6211 C220,86.6211 202,86.6211 202,86.6211 C202,86.6211 184,86.6211 184,76.6211 L184,50.6211 " fill="#FEFECE" filter="url(#f1rkd2yurigasb)" style="stroke:#000000;stroke-width:1.5;"/><path d="M184,50.6211 C184,60.6211 202,60.6211 202,60.6211 C202,60.6211 220,60.6211 220,50.6211 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="257" y="100.1563">Bob's clone</text><path d="M280.5,50.6211 C280.5,40.6211 298.5,40.6211 298.5,40.6211 C298.5,40.6211 316.5,40.6211 316.5,50.6211 L316.5,76.6211 C316.5,86.6211 298.5,86.6211 298.5,86.6211 C298.5,86.6211 280.5,86.6211 280.5,76.6211 L280.5,50.6211 " fill="#FEFECE" filter="url(#f1rkd2yurigasb)" style="stroke:#000000;stroke-width:1.5;"/><path d="M280.5,50.6211 C280.5,60.6211 298.5,60.6211 298.5,60.6211 C298.5,60.6211 316.5,60.6211 316.5,50.6211 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="350" y="100.1563">app</text><ellipse cx="366" cy="70.6211" fill="#FEFECE" filter="url(#f1rkd2yurigasb)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="362,58.6211,368,53.6211,366,58.6211,368,63.6211,362,58.6211" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="559.5" y="100.1563">clone</text><path d="M563,50.6211 C563,40.6211 581,40.6211 581,40.6211 C581,40.6211 599,40.6211 599,50.6211 L599,76.6211 C599,86.6211 581,86.6211 581,86.6211 C581,86.6211 563,86.6211 563,76.6211 L563,50.6211 " fill="#FEFECE" filter="url(#f1rkd2yurigasb)" style="stroke:#000000;stroke-width:1.5;"/><path d="M563,50.6211 C563,60.6211 581,60.6211 581,60.6211 C581,60.6211 599,60.6211 599,50.6211 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1rkd2yurigasb)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="88" x="661" y="67.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="668" y="88.1563">messaging</text><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="68.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="361" y="230.3516"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="83.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="361" y="396.9043"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576" y="201.041"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576" y="298.9727"/><rect fill="#FFFFFF" filter="url(#f1rkd2yurigasb)" height="271.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="576" y="362.5938"/><polygon fill="#A80036" points="695,132.4199,705,136.4199,695,140.4199,699,136.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="202" x2="701" y1="136.4199" y2="136.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="209" y="131.6777">Op3 ≪agree≫</text><rect fill="#FBFB77" filter="url(#f1rkd2yurigasb)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="192" x="5" y="118.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="9" y="134.6777">delete Bob's write permission</text><polygon fill="#A80036" points="695,165.7305,705,169.7305,695,173.7305,699,169.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="298.5" x2="701" y1="169.7305" y2="169.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="305.5" y="164.9883">Op4</text><rect fill="#FBFB77" filter="url(#f1rkd2yurigasb)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="123" x="170" y="151.4199"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="174" y="167.6646">INSERT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="226" y="167.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="63" x="226" y="167.9883">[anything]</text><polygon fill="#A80036" points="597,197.041,587,201.041,597,205.041,593,201.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="591" x2="706" y1="201.041" y2="201.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="603" y="196.2988">Op4</text><polygon fill="#A80036" points="382,226.3516,372,230.3516,382,234.3516,378,230.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="376" x2="580" y1="230.3516" y2="230.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="388" y="225.6094">Op4 ≪update≫</text><path d="M286,243.3516 L286,268.3516 L442,268.3516 L442,253.3516 L432,243.3516 L286,243.3516 " fill="#FBFB77" filter="url(#f1rkd2yurigasb)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M432,243.3516 L432,253.3516 L442,253.3516 L432,243.3516 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="292" y="260.9199">app-triggered update</text><polygon fill="#A80036" points="564,294.9727,574,298.9727,564,302.9727,568,298.9727" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="366" x2="570" y1="298.9727" y2="298.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="373" y="294.2305">Op5 ≪transaction≫</text><polygon fill="#A80036" points="695,324.2832,705,328.2832,695,332.2832,699,328.2832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="581" x2="701" y1="328.2832" y2="328.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="588" y="323.541">Op5</text><polygon fill="#A80036" points="597,358.5938,587,362.5938,597,366.5938,593,362.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="591" x2="706" y1="362.5938" y2="362.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="603" y="357.8516">Op3</text><path d="M311,341.2832 L311,366.2832 L567,366.2832 L567,351.2832 L557,341.2832 L311,341.2832 " fill="#FBFB77" filter="url(#f1rkd2yurigasb)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M557,341.2832 L557,351.2832 L567,351.2832 L557,341.2832 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="317" y="358.8516">Op3 agreement pre-dates Op4 &amp; Op5</text><polygon fill="#A80036" points="382,392.9043,372,396.9043,382,400.9043,378,396.9043" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="376" x2="575" y1="396.9043" y2="396.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="388" y="392.1621">Fork or Void?</text><path d="M289,409.9043 L289,449.9043 L439,449.9043 L439,419.9043 L429,409.9043 L289,409.9043 " fill="#FBFB77" filter="url(#f1rkd2yurigasb)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M429,409.9043 L429,419.9043 L439,419.9043 L429,409.9043 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="295" y="427.4727">App instances can</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="295" y="442.7832">coordinate to decide</text><polygon fill="#A80036" points="564,476.8359,574,480.8359,564,484.8359,568,480.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="366" x2="570" y1="480.8359" y2="480.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28" x="373" y="476.0938">Void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="586" x2="628" y1="510.1465" y2="510.1465"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="628" y1="510.1465" y2="523.1465"/><line style="stroke:#A80036;stroke-width:1.0;" x1="587" x2="628" y1="523.1465" y2="523.1465"/><polygon fill="#A80036" points="597,519.1465,587,523.1465,597,527.1465,593,523.1465" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="593" y="505.4043">Void Op4 + Op5</text><path d="M449,536.1465 L449,561.1465 L709,561.1465 L709,546.1465 L699,536.1465 L449,536.1465 " fill="#FBFB77" filter="url(#f1rkd2yurigasb)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M699,536.1465 L699,546.1465 L709,546.1465 L699,536.1465 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="455" y="553.7148">Op4 &amp; Op5 also removed from Journal</text><line style="stroke:#A80036;stroke-width:1.0;" x1="586" x2="628" y1="591.7676" y2="591.7676"/><line style="stroke:#A80036;stroke-width:1.0;" x1="628" x2="628" y1="591.7676" y2="604.7676"/><line style="stroke:#A80036;stroke-width:1.0;" x1="587" x2="628" y1="604.7676" y2="604.7676"/><polygon fill="#A80036" points="597,600.7676,587,604.7676,597,608.7676,593,604.7676" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="593" y="587.0254">Apply Op3</text><polygon fill="#A80036" points="377,630.0781,367,634.0781,377,638.0781,373,634.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="580" y1="634.0781" y2="634.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="383" y="629.3359">Op3 - (Op4 + Op5) ≪update≫</text><!--MD5=[6608b8f5575e7de7feff63c863a0b08d]
@startuml
'https://plantuml.com/sequence-diagram
hide footbox

database "Alice's clone" as genesis
database "Bob's clone" as clone2
box Claire's device\n(closer to Bob)
control "app" as proc4
database "clone" as clone4
end box

genesis -> messaging: Op3 ≪agree≫
rnote left: delete Bob's write permission

clone2 -> messaging: Op4
rnote left: ""INSERT"" //[anything]//

messaging -> clone4 ++: Op4
clone4 -> proc4 - -++: Op4 ≪update≫
note over proc4: app-triggered update

proc4 -> clone4 - -++: Op5 ≪transaction≫
clone4 -> messaging - -: Op5

messaging -> clone4 ++: Op3
note left: Op3 agreement pre-dates Op4 & Op5
clone4 -> proc4 ++: Fork or Void?
note over proc4
App instances can
coordinate to decide
end note
proc4 - -> clone4 - -: Void
clone4 -> clone4: Void Op4 + Op5
note over clone4: Op4 & Op5 also removed from Journal
clone4 -> clone4: Apply Op3
clone4 -> proc4 - -: Op3 - (Op4 + Op5) ≪update≫

@enduml

@startuml
hide footbox

database "Alice's clone" as genesis
database "Bob's clone" as clone2
box Claire's device\n(closer to Bob)
control "app" as proc4
database "clone" as clone4
end box

genesis -> messaging: Op3 ≪agree≫
rnote left: delete Bob's write permission

clone2 -> messaging: Op4
rnote left: ""INSERT"" //[anything]//

messaging -> clone4 ++: Op4
clone4 -> proc4 - -++: Op4 ≪update≫
note over proc4: app-triggered update

proc4 -> clone4 - -++: Op5 ≪transaction≫
clone4 -> messaging - -: Op5

messaging -> clone4 ++: Op3
note left: Op3 agreement pre-dates Op4 & Op5
clone4 -> proc4 ++: Fork or Void?
note over proc4
App instances can
coordinate to decide
end note
proc4 - -> clone4 - -: Void
clone4 -> clone4: Void Op4 + Op5
note over clone4: Op4 & Op5 also removed from Journal
clone4 -> clone4: Apply Op3
clone4 -> proc4 - -: Op3 - (Op4 + Op5) ≪update≫

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>