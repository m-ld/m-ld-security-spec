<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="973px" preserveAspectRatio="none" style="width:748px;height:973px;background:#FFFFFF;" version="1.1" viewBox="0 0 748 973" width="748px" zoomAndPan="magnify"><defs><filter height="300%" id="f1526nsyvc7wix" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="954.5762" style="stroke:#A80036;stroke-width:1.0;" width="249" x="334" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="91" x="413" y="18.5684">Alice's device</text><rect fill="#FFFFFF" filter="url(#f1526nsyvc7wix)" height="342.8457" style="stroke:#A80036;stroke-width:1.0;" width="10" x="538" y="576.4199"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="354" x2="354" y1="104.2871" y2="966.5762"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="543" x2="543" y1="211.0859" y2="966.5762"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="692" x2="692" y1="104.2871" y2="966.5762"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="338" y="101.334">app</text><ellipse cx="354" cy="71.7988" fill="#FEFECE" filter="url(#f1526nsyvc7wix)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="350,59.7988,356,54.7988,354,59.7988,356,64.7988,350,59.7988" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1526nsyvc7wix)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="88" x="646" y="68.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="653" y="89.334">messaging</text><rect fill="#FFFFFF" filter="url(#f1526nsyvc7wix)" height="342.8457" style="stroke:#A80036;stroke-width:1.0;" width="10" x="538" y="576.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="396" y1="135.5977" y2="135.5977"/><line style="stroke:#A80036;stroke-width:1.0;" x1="396" x2="396" y1="135.5977" y2="148.5977"/><line style="stroke:#A80036;stroke-width:1.0;" x1="355" x2="396" y1="148.5977" y2="148.5977"/><polygon fill="#A80036" points="365,144.5977,355,148.5977,365,152.5977,361,148.5977" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="361" y="130.8555">Authenticate Alice</text><polygon fill="#A80036" points="495,173.9082,505,177.9082,495,181.9082,499,177.9082" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="501" y1="177.9082" y2="177.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="361" y="173.166">init</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="386" y="172.8423">domain.ex.org</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="507" y="216.1328">«genesis»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="521.5" y="232.6211">clone</text><path d="M525,166.5977 C525,156.5977 543,156.5977 543,156.5977 C543,156.5977 561,156.5977 561,166.5977 L561,192.5977 C561,202.5977 543,202.5977 543,202.5977 C543,202.5977 525,202.5977 525,192.5977 L525,166.5977 " fill="#FEFECE" filter="url(#f1526nsyvc7wix)" style="stroke:#000000;stroke-width:1.5;"/><path d="M525,166.5977 C525,176.5977 543,176.5977 543,176.5977 C543,176.5977 561,176.5977 561,166.5977 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><path d="M43,186.4307 L43,211.4307 L345,211.4307 L345,196.4307 L335,186.4307 L43,186.4307 " fill="#FBFB77" filter="url(#f1526nsyvc7wix)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M335,186.4307 L335,196.4307 L345,196.4307 L335,186.4307 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="49" y="203.999">Configuration includes domain secret "abcd"</text><polygon fill="#A80036" points="680,262.8848,690,266.8848,680,270.8848,684,266.8848" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="543" x2="686" y1="266.8848" y2="266.8848"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="550" y="262.1426">connect</text><polygon fill="#A80036" points="680,292.1953,690,296.1953,680,300.1953,684,296.1953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="543" x2="686" y1="296.1953" y2="296.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="550" y="291.4531">init domain channel</text><polygon fill="#A80036" points="531,336.8164,541,340.8164,531,344.8164,535,340.8164" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="354" x2="537" y1="340.8164" y2="340.8164"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="361" y="320.7637">install statutes &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="361" y="336.0742">agreements ontology</text><polygon fill="#A80036" points="526,572.4199,536,576.4199,526,580.4199,530,576.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="532" y1="576.4199" y2="576.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="361" y="571.6777">Op0 ≪transaction≫</text><rect fill="#FBFB77" filter="url(#f1526nsyvc7wix)" height="431" style="stroke:#A80036;stroke-width:1.0;" width="344" x="5" y="353.8164"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="16" x="9" y="369.8833">[{</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="184" x="25" y="385.0161">"@id": "domain.ex.org",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="248" x="25" y="400.1489">"mld:access": "mld:Permission",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="160" x="25" y="415.2817">"mld:secret": "abcd"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="9" y="430.4146">}, {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="120" x="25" y="445.5474">"@id": "Alice",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="25" y="460.6802">"@type": "mld:Principal",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="192" x="25" y="475.813">"mld:publicKey": "1234",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="184" x="25" y="490.9458">"mld:hasPermission": [{</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="41" y="506.0786">"@type": "mld:Authority",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="304" x="41" y="521.2114">"mld:appliesToPattern": { "@id": "?" }</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="25" y="536.3442">}, {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="216" x="41" y="551.4771">"@id": "mld:readPermission"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="16" x="25" y="566.6099">}]</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="9" y="581.7427">}, {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="25" y="596.8755">"@id": "Bob",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="25" y="612.0083">"@type": "mld:Principal",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="192" x="25" y="627.1411">"mld:publicKey": "5678",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="25" y="642.2739">"mld:hasPermission": {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="216" x="41" y="657.4067">"@id": "mld:readPermission"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="8" x="25" y="672.5396">}</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="9" y="687.6724">}, {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="272" x="25" y="702.8052">"@id": "mld:accessControlStatute",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="224" x="25" y="717.938">"mld:sufficientCondition": {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="41" y="733.0708">"@id": "mld:hasAuthority"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="8" x="25" y="748.2036">}</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="16" x="9" y="763.3364">}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="9" y="778.9707">(declares access control is by whitelist ACL)</text><rect fill="#FBFB77" filter="url(#f1526nsyvc7wix)" height="38" style="stroke:#A80036;stroke-width:1.0;" width="167" x="459" y="795.7129"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="463" y="812.2813">Op0 allowed because no</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="463" y="827.5918">access control is in place</text><polygon fill="#A80036" points="680,856.6445,690,860.6445,680,864.6445,684,860.6445" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="548" x2="686" y1="860.6445" y2="860.6445"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="555" y="855.9023">Op0 ≪agree≫</text><polygon fill="#A80036" points="365,885.9551,355,889.9551,365,893.9551,361,889.9551" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="359" x2="537" y1="889.9551" y2="889.9551"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="371" y="885.2129">resolve</text><polygon fill="#A80036" points="365,915.2656,355,919.2656,365,923.2656,361,919.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="359" x2="542" y1="919.2656" y2="919.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="371" y="914.5234">Op0 ≪update≫</text><line style="stroke:#A80036;stroke-width:2.0;" x1="725" x2="735" y1="943.5762" y2="953.5762"/><line style="stroke:#A80036;stroke-width:2.0;" x1="725" x2="735" y1="953.5762" y2="943.5762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="692" x2="730" y1="948.5762" y2="948.5762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="699" y="943.834">Op0</text><!--MD5=[93033cb5de9d5d307ba053ba72499959]
@startuml
'https://plantuml.com/sequence-diagram
hide footbox

box Alice's device
control "app" as proc1
database "clone" as genesis << genesis >>
end box

proc1 -> proc1: Authenticate Alice
proc1 -> genesis **: init ""domain.ex.org""
note left
Configuration includes domain secret "abcd"
end note
genesis -> messaging : connect
genesis -> messaging : init domain channel

proc1 - -> genesis: install statutes &\nagreements ontology

proc1 -> genesis ++: Op0 ≪transaction≫
rnote left
<code>
[{
  "@id": "domain.ex.org",
  "mld:access": "mld:Permission",
  "mld:secret": "abcd"
}, {
  "@id": "Alice",
  "@type": "mld:Principal",
  "mld:publicKey": "1234",
  "mld:hasPermission": [{
    "@type": "mld:Authority",
    "mld:appliesToPattern": { "@id": "?" }
  }, {
    "@id": "mld:readPermission"
  }]
}, {
  "@id": "Bob",
  "@type": "mld:Principal",
  "mld:publicKey": "5678",
  "mld:hasPermission": {
    "@id": "mld:readPermission"
  }
}, {
  "@id": "mld:accessControlStatute",
  "mld:sufficientCondition": {
    "@id": "mld:hasAuthority"
  }
}]
</code>
(declares access control is by whitelist ACL)
end note

rnote over genesis
Op0 allowed because no
access control is in place
end note

genesis -> messaging: Op0 ≪agree≫
genesis - -> proc1: //resolve//
genesis -> proc1 - -: Op0 ≪update≫
messaging ->x] : Op0

@enduml

@startuml
hide footbox

box Alice's device
control "app" as proc1
database "clone" as genesis << genesis >>
end box

proc1 -> proc1: Authenticate Alice
proc1 -> genesis **: init ""domain.ex.org""
note left
Configuration includes domain secret "abcd"
end note
genesis -> messaging : connect
genesis -> messaging : init domain channel

proc1 - -> genesis: install statutes &\nagreements ontology

proc1 -> genesis ++: Op0 ≪transaction≫
rnote left
<code>
[{
  "@id": "domain.ex.org",
  "mld:access": "mld:Permission",
  "mld:secret": "abcd"
}, {
  "@id": "Alice",
  "@type": "mld:Principal",
  "mld:publicKey": "1234",
  "mld:hasPermission": [{
    "@type": "mld:Authority",
    "mld:appliesToPattern": { "@id": "?" }
  }, {
    "@id": "mld:readPermission"
  }]
}, {
  "@id": "Bob",
  "@type": "mld:Principal",
  "mld:publicKey": "5678",
  "mld:hasPermission": {
    "@id": "mld:readPermission"
  }
}, {
  "@id": "mld:accessControlStatute",
  "mld:sufficientCondition": {
    "@id": "mld:hasAuthority"
  }
}]
</code>
(declares access control is by whitelist ACL)
end note

rnote over genesis
Op0 allowed because no
access control is in place
end note

genesis -> messaging: Op0 ≪agree≫
genesis - -> proc1: //resolve//
genesis -> proc1 - -: Op0 ≪update≫
messaging ->x] : Op0

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>