<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="943px" preserveAspectRatio="none" style="width:710px;height:943px;background:#FFFFFF;" version="1.1" viewBox="0 0 710 943" width="710px" zoomAndPan="magnify"><defs><filter height="300%" id="f191b5fk545610" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="924.3105" style="stroke:#A80036;stroke-width:1.0;" width="249" x="296" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="91" x="375" y="18.5684">Alice's device</text><rect fill="#FFFFFF" filter="url(#f191b5fk545610)" height="327.7129" style="stroke:#A80036;stroke-width:1.0;" width="10" x="500" y="561.2871"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="316" x2="316" y1="104.2871" y2="936.3105"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="505" x2="505" y1="211.0859" y2="936.3105"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="654" x2="654" y1="104.2871" y2="936.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="300" y="101.334">app</text><ellipse cx="316" cy="71.7988" fill="#FEFECE" filter="url(#f191b5fk545610)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="312,59.7988,318,54.7988,316,59.7988,318,64.7988,312,59.7988" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f191b5fk545610)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="88" x="608" y="68.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="615" y="89.334">messaging</text><rect fill="#FFFFFF" filter="url(#f191b5fk545610)" height="327.7129" style="stroke:#A80036;stroke-width:1.0;" width="10" x="500" y="561.2871"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="358" y1="135.5977" y2="135.5977"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="358" y1="135.5977" y2="148.5977"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317" x2="358" y1="148.5977" y2="148.5977"/><polygon fill="#A80036" points="327,144.5977,317,148.5977,327,152.5977,323,148.5977" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="323" y="130.8555">Authenticate Alice</text><polygon fill="#A80036" points="457,173.9082,467,177.9082,457,181.9082,461,177.9082" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="463" y1="177.9082" y2="177.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="323" y="173.166">init</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="348" y="172.8423">domain.ex.org</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="469" y="216.1328">«genesis»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="483.5" y="232.6211">clone</text><path d="M487,166.5977 C487,156.5977 505,156.5977 505,156.5977 C505,156.5977 523,156.5977 523,166.5977 L523,192.5977 C523,202.5977 505,202.5977 505,202.5977 C505,202.5977 487,202.5977 487,192.5977 L487,166.5977 " fill="#FEFECE" filter="url(#f191b5fk545610)" style="stroke:#000000;stroke-width:1.5;"/><path d="M487,166.5977 C487,176.5977 505,176.5977 505,176.5977 C505,176.5977 523,176.5977 523,166.5977 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><path d="M5,186.4307 L5,211.4307 L307,211.4307 L307,196.4307 L297,186.4307 L5,186.4307 " fill="#FBFB77" filter="url(#f191b5fk545610)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M297,186.4307 L297,196.4307 L307,196.4307 L297,186.4307 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="11" y="203.999">Configuration includes domain secret "abcd"</text><polygon fill="#A80036" points="642,262.8848,652,266.8848,642,270.8848,646,266.8848" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="505" x2="648" y1="266.8848" y2="266.8848"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="512" y="262.1426">connect</text><polygon fill="#A80036" points="642,292.1953,652,296.1953,642,300.1953,646,296.1953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="505" x2="648" y1="296.1953" y2="296.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="512" y="291.4531">init domain channel</text><polygon fill="#A80036" points="493,336.8164,503,340.8164,493,344.8164,497,340.8164" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="316" x2="499" y1="340.8164" y2="340.8164"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="323" y="320.7637">install statutes &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="323" y="336.0742">agreements ontology</text><polygon fill="#A80036" points="488,557.2871,498,561.2871,488,565.2871,492,561.2871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="494" y1="561.2871" y2="561.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="323" y="556.5449">Op0 ≪transaction≫</text><rect fill="#FBFB77" filter="url(#f191b5fk545610)" height="401" style="stroke:#A80036;stroke-width:1.0;" width="296" x="15" y="353.8164"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="16" x="19" y="369.8833">[{</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="184" x="35" y="385.0161">"@id": "domain.ex.org",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="248" x="35" y="400.1489">"mld:access": "mld:Permission",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="160" x="35" y="415.2817">"mld:secret": "abcd"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="19" y="430.4146">}, {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="120" x="35" y="445.5474">"@id": "Alice",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="35" y="460.6802">"@type": "mld:Principal",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="192" x="35" y="475.813">"mld:publicKey": "1234",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="184" x="35" y="490.9458">"mld:hasPermission": [{</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="51" y="506.0786">"@type": "mld:Authority",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="192" x="51" y="521.2114">"mld:controlledShape": {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="168" x="67" y="536.3442">"@id": "AllSubjects",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="184" x="67" y="551.4771">"@type": "sh:NodeShape"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="8" x="51" y="566.6099">}</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="16" x="35" y="581.7427">}]</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="19" y="596.8755">}, {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="35" y="612.0083">"@id": "Bob",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="35" y="627.1411">"@type": "mld:Principal",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="184" x="35" y="642.2739">"mld:publicKey": "5678"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="19" y="657.4067">}, {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="272" x="35" y="672.5396">"@id": "mld:accessControlStatute",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="224" x="35" y="687.6724">"mld:sufficientCondition": {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="200" x="51" y="702.8052">"@id": "mld:hasAuthority"</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="8" x="35" y="717.938">}</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="16" x="19" y="733.0708">}]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="19" y="748.7051">(declares access control is by whitelist ACL)</text><rect fill="#FBFB77" filter="url(#f191b5fk545610)" height="38" style="stroke:#A80036;stroke-width:1.0;" width="167" x="421" y="765.4473"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="425" y="782.0156">Op0 allowed because no</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="425" y="797.3262">access control is in place</text><polygon fill="#A80036" points="642,826.3789,652,830.3789,642,834.3789,646,830.3789" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="510" x2="648" y1="830.3789" y2="830.3789"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="517" y="825.6367">Op0 ≪agree≫</text><polygon fill="#A80036" points="327,855.6895,317,859.6895,327,863.6895,323,859.6895" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="321" x2="499" y1="859.6895" y2="859.6895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="333" y="854.9473">resolve</text><polygon fill="#A80036" points="327,885,317,889,327,893,323,889" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321" x2="504" y1="889" y2="889"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="333" y="884.2578">Op0 ≪update≫</text><line style="stroke:#A80036;stroke-width:2.0;" x1="687" x2="697" y1="913.3105" y2="923.3105"/><line style="stroke:#A80036;stroke-width:2.0;" x1="687" x2="697" y1="923.3105" y2="913.3105"/><line style="stroke:#A80036;stroke-width:1.0;" x1="654" x2="692" y1="918.3105" y2="918.3105"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="661" y="913.5684">Op0</text><!--MD5=[bba7909a2a07be736d57a5c647a2f936]
@startuml
'https://plantuml.com/sequence-diagram
hide footbox

box Alice's device
control "app" as proc1
database "clone" as genesis << genesis >>
end box

proc1 -> proc1: Authenticate Alice
proc1 -> genesis **: init ""domain.ex.org""
note left
Configuration includes domain secret "abcd"
end note
genesis -> messaging : connect
genesis -> messaging : init domain channel

proc1 - -> genesis: install statutes &\nagreements ontology

proc1 -> genesis ++: Op0 ≪transaction≫
rnote left
<code>
[{
  "@id": "domain.ex.org",
  "mld:access": "mld:Permission",
  "mld:secret": "abcd"
}, {
  "@id": "Alice",
  "@type": "mld:Principal",
  "mld:publicKey": "1234",
  "mld:hasPermission": [{
    "@type": "mld:Authority",
    "mld:controlledShape": {
      "@id": "AllSubjects",
      "@type": "sh:NodeShape"
    }
  }]
}, {
  "@id": "Bob",
  "@type": "mld:Principal",
  "mld:publicKey": "5678"
}, {
  "@id": "mld:accessControlStatute",
  "mld:sufficientCondition": {
    "@id": "mld:hasAuthority"
  }
}]
</code>
(declares access control is by whitelist ACL)
end note

rnote over genesis
Op0 allowed because no
access control is in place
end note

genesis -> messaging: Op0 ≪agree≫
genesis - -> proc1: //resolve//
genesis -> proc1 - -: Op0 ≪update≫
messaging ->x] : Op0

@enduml

@startuml
hide footbox

box Alice's device
control "app" as proc1
database "clone" as genesis << genesis >>
end box

proc1 -> proc1: Authenticate Alice
proc1 -> genesis **: init ""domain.ex.org""
note left
Configuration includes domain secret "abcd"
end note
genesis -> messaging : connect
genesis -> messaging : init domain channel

proc1 - -> genesis: install statutes &\nagreements ontology

proc1 -> genesis ++: Op0 ≪transaction≫
rnote left
<code>
[{
  "@id": "domain.ex.org",
  "mld:access": "mld:Permission",
  "mld:secret": "abcd"
}, {
  "@id": "Alice",
  "@type": "mld:Principal",
  "mld:publicKey": "1234",
  "mld:hasPermission": [{
    "@type": "mld:Authority",
    "mld:controlledShape": {
      "@id": "AllSubjects",
      "@type": "sh:NodeShape"
    }
  }]
}, {
  "@id": "Bob",
  "@type": "mld:Principal",
  "mld:publicKey": "5678"
}, {
  "@id": "mld:accessControlStatute",
  "mld:sufficientCondition": {
    "@id": "mld:hasAuthority"
  }
}]
</code>
(declares access control is by whitelist ACL)
end note

rnote over genesis
Op0 allowed because no
access control is in place
end note

genesis -> messaging: Op0 ≪agree≫
genesis - -> proc1: //resolve//
genesis -> proc1 - -: Op0 ≪update≫
messaging ->x] : Op0

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>