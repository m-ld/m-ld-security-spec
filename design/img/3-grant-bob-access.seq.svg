<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="623px" preserveAspectRatio="none" style="width:867px;height:623px;background:#FFFFFF;" version="1.1" viewBox="0 0 867 623" width="867px" zoomAndPan="magnify"><defs><filter height="300%" id="f1a4whcoe3d8j0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="604.4551" style="stroke:#A80036;stroke-width:1.0;" width="189.5" x="489" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="542.25" y="18.5684">Bob's device</text><rect fill="#FFFFFF" filter="url(#f1a4whcoe3d8j0)" height="35.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="349" y="556.1445"/><rect fill="#FFFFFF" filter="url(#f1a4whcoe3d8j0)" height="104.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="648" y="258.3496"/><rect fill="#FFFFFF" filter="url(#f1a4whcoe3d8j0)" height="132.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="648" y="394.5918"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="354" x2="354" y1="87.7988" y2="616.4551"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="509" x2="509" y1="87.7988" y2="616.4551"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="652.5" x2="652.5" y1="87.7988" y2="616.4551"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="811" x2="811" y1="87.7988" y2="616.4551"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="309" y="84.8457">Alice's clone</text><path d="M336,35.3105 C336,25.3105 354,25.3105 354,25.3105 C354,25.3105 372,25.3105 372,35.3105 L372,61.3105 C372,71.3105 354,71.3105 354,71.3105 C354,71.3105 336,71.3105 336,61.3105 L336,35.3105 " fill="#FEFECE" filter="url(#f1a4whcoe3d8j0)" style="stroke:#000000;stroke-width:1.5;"/><path d="M336,35.3105 C336,45.3105 354,45.3105 354,45.3105 C354,45.3105 372,45.3105 372,35.3105 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="493" y="84.8457">app</text><ellipse cx="509" cy="55.3105" fill="#FEFECE" filter="url(#f1a4whcoe3d8j0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="505,43.3105,511,38.3105,509,43.3105,511,48.3105,505,43.3105" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="631.5" y="84.8457">clone</text><path d="M635,35.3105 C635,25.3105 653,25.3105 653,25.3105 C653,25.3105 671,25.3105 671,35.3105 L671,61.3105 C671,71.3105 653,71.3105 653,71.3105 C653,71.3105 635,71.3105 635,61.3105 L635,35.3105 " fill="#FEFECE" filter="url(#f1a4whcoe3d8j0)" style="stroke:#000000;stroke-width:1.5;"/><path d="M635,35.3105 C635,45.3105 653,45.3105 653,45.3105 C653,45.3105 671,45.3105 671,35.3105 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1a4whcoe3d8j0)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="88" x="765" y="52.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="772" y="72.8457">messaging</text><rect fill="#FFFFFF" filter="url(#f1a4whcoe3d8j0)" height="35.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="349" y="556.1445"/><rect fill="#FFFFFF" filter="url(#f1a4whcoe3d8j0)" height="104.9316" style="stroke:#A80036;stroke-width:1.0;" width="10" x="648" y="258.3496"/><rect fill="#FFFFFF" filter="url(#f1a4whcoe3d8j0)" height="132.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="648" y="394.5918"/><polygon fill="#A80036" points="799,170.0742,809,174.0742,799,178.0742,803,174.0742" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="805" y1="174.0742" y2="174.0742"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="361" y="169.332">Op3 ≪agree≫</text><rect fill="#FBFB77" filter="url(#f1a4whcoe3d8j0)" height="129" style="stroke:#A80036;stroke-width:1.0;" width="344" x="5" y="102.7988"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="8" x="9" y="118.8657">{</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="25" y="133.9985">"@id": "Bob",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="25" y="149.1313">"mld:hasPermission": {</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="248" x="41" y="164.2642">"@type": "mld:WritePermission",</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="304" x="41" y="179.397">"mld:appliesToPattern": { "@id": "?" }</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="8" x="25" y="194.5298">}</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="8" x="9" y="209.6626">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267" x="9" y="225.2969">(gives Bob write permission over anything)</text><polygon fill="#A80036" points="669,254.3496,659,258.3496,669,262.3496,665,258.3496" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="663" x2="810" y1="258.3496" y2="258.3496"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="675" y="253.6074">Op3</text><line style="stroke:#A80036;stroke-width:1.0;" x1="658" x2="700" y1="287.6602" y2="287.6602"/><line style="stroke:#A80036;stroke-width:1.0;" x1="700" x2="700" y1="287.6602" y2="300.6602"/><line style="stroke:#A80036;stroke-width:1.0;" x1="659" x2="700" y1="300.6602" y2="300.6602"/><polygon fill="#A80036" points="669,296.6602,659,300.6602,669,304.6602,665,300.6602" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="665" y="282.918">ACL constraint apply</text><rect fill="#FBFB77" filter="url(#f1a4whcoe3d8j0)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="56" x="625" y="313.6602"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="629" y="330.2285">Op3 OK</text><polygon fill="#A80036" points="520,359.2813,510,363.2813,520,367.2813,516,363.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="514" x2="652" y1="363.2813" y2="363.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="526" y="358.5391">Op3 ≪update≫</text><polygon fill="#A80036" points="636,390.5918,646,394.5918,636,398.5918,640,394.5918" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="509" x2="642" y1="394.5918" y2="394.5918"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="516" y="389.8496">Op4 ≪transaction≫</text><rect fill="#FBFB77" filter="url(#f1a4whcoe3d8j0)" height="23" style="stroke:#A80036;stroke-width:1.0;" width="207" x="297" y="376.2813"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="301" y="392.5259">INSERT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="353" y="392.8496"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="147" x="353" y="392.8496">[anything not a statute]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="658" x2="700" y1="425.9023" y2="425.9023"/><line style="stroke:#A80036;stroke-width:1.0;" x1="700" x2="700" y1="425.9023" y2="438.9023"/><line style="stroke:#A80036;stroke-width:1.0;" x1="659" x2="700" y1="438.9023" y2="438.9023"/><polygon fill="#A80036" points="669,434.9023,659,438.9023,669,442.9023,665,438.9023" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="665" y="421.1602">ACL constraint check</text><polygon fill="#A80036" points="799,464.2129,809,468.2129,799,472.2129,803,468.2129" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="658" x2="805" y1="468.2129" y2="468.2129"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="665" y="463.4707">Op4</text><polygon fill="#A80036" points="520,493.5234,510,497.5234,520,501.5234,516,497.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="514" x2="647" y1="497.5234" y2="497.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="526" y="492.7813">resolve</text><polygon fill="#A80036" points="520,522.834,510,526.834,520,530.834,516,526.834" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="514" x2="652" y1="526.834" y2="526.834"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="526" y="522.0918">Op4 ≪update≫</text><polygon fill="#A80036" points="370,552.1445,360,556.1445,370,560.1445,366,556.1445" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="364" x2="810" y1="556.1445" y2="556.1445"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="376" y="551.4023">Op4</text><line style="stroke:#A80036;stroke-width:1.0;" x1="359" x2="401" y1="590.4551" y2="590.4551"/><line style="stroke:#A80036;stroke-width:1.0;" x1="401" x2="401" y1="590.4551" y2="603.4551"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354" x2="401" y1="603.4551" y2="603.4551"/><polygon fill="#A80036" points="364,599.4551,354,603.4551,364,607.4551,360,603.4551" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="366" y="585.7129">ACL constraint apply</text><!--MD5=[3d8700b3068e1ae6470cd04442e258a4]
@startuml
'https://plantuml.com/sequence-diagram
hide footbox

database "Alice's clone" as genesis
box Bob's device
control "app" as proc2
database "clone" as clone2
end box

genesis -> messaging: Op3 ≪agree≫
rnote left
<code>
{
  "@id": "Bob",
  "mld:hasPermission": {
    "@type": "mld:WritePermission",
    "mld:appliesToPattern": { "@id": "?" }
  }
}
</code>
(gives Bob write permission over anything)
end note

messaging -> clone2 ++: Op3
clone2 -> clone2: ACL constraint apply
rnote over clone2: Op3 OK
clone2 -> proc2 - -: Op3 ≪update≫

proc2 -> clone2 ++: Op4 ≪transaction≫
rnote left: ""INSERT"" //[anything not a statute]//

clone2 -> clone2: ACL constraint check

clone2 -> messaging: Op4
clone2 - -> proc2: //resolve//
clone2 -> proc2 - -: Op4 ≪update≫
messaging -> genesis ++: Op4
genesis -> genesis - -: ACL constraint apply

@enduml

@startuml
hide footbox

database "Alice's clone" as genesis
box Bob's device
control "app" as proc2
database "clone" as clone2
end box

genesis -> messaging: Op3 ≪agree≫
rnote left
<code>
{
  "@id": "Bob",
  "mld:hasPermission": {
    "@type": "mld:WritePermission",
    "mld:appliesToPattern": { "@id": "?" }
  }
}
</code>
(gives Bob write permission over anything)
end note

messaging -> clone2 ++: Op3
clone2 -> clone2: ACL constraint apply
rnote over clone2: Op3 OK
clone2 -> proc2 - -: Op3 ≪update≫

proc2 -> clone2 ++: Op4 ≪transaction≫
rnote left: ""INSERT"" //[anything not a statute]//

clone2 -> clone2: ACL constraint check

clone2 -> messaging: Op4
clone2 - -> proc2: //resolve//
clone2 -> proc2 - -: Op4 ≪update≫
messaging -> genesis ++: Op4
genesis -> genesis - -: ACL constraint apply

@enduml

PlantUML version 1.2021.10(Mon Aug 30 14:43:48 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>